# Плагин "Угадай сколько у меня заказов?" для Shop-Script

Добавляет случайные значения к номеру заказа.

## Установка

1. Скопировать файлы из репозитория в каталог *wa-apps/shop/plugins/guesshowmanyordersdoihave*
2. Включить плагин в Инсталлере.

**После установки плагина проверьте настройки в разделе "Магазин" -> "Плагины"!**

## Автоматическое увеличение номера заказа

При оформлении заказа будет выбрано случайное целое число в промежутке между MIN и MAX (задаются в настройках плагина), которое будет прибавлено к номеру следующего заказа.

При этом должны выполняться следующие условия:

Если полученное случайное число меньше 1, надбавки не будет.
MAX не может быть меньше MIN, иначе надбавки не будет.
Если MAX или MIN не число, надбавки не будет.
Если MAX равно MIN, прибавка к номеру всегда будет одинаковая.

## Запуск надбавки через планировщик

Параметры min и max задаются напрямую в планировщике. Значения по-умолчанию 1 и 20 соответственно.

`
php путь-к-установке-webasyst/cli.php shop guesshowmanyordersdoihave -min 1 -max 20
`

[Подробнее](http://hardmandev.com/article/nastroyka-cron-dlya-webasyst/) о настройке Cron.

Прибавка осуществляется к номеру последнего заказа. Поэтому повторный запуск команды по расписанию может не изменить номер, если у вас нет естественных заказов.

- Например, последний естественный заказ #10047.
- Сработала автоматическая надбавка, следующий заказ будет #10061 (выпало случайное число 14).
- Сработало задание планировщика, следующий заказ будет #10056 (выпало случайное число 9).
- Сработало задание планировщика, следующий заказ будет #10058 (выпало случайное число 11).

Т.е. случайное число каждый раз добавляется к последнему номеру - 47. И так, пока не будет оформлен реальный заказ.